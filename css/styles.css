:root{
  --bg:#f7fafd; --surface:#ffffff; --text:#0e1b29; --muted:#6c7a88; --line:#e3eaf2; --primary:#0a84ff; --success:#34c759;
  --radius:16px; --gap:16px; --shadow:0 18px 36px rgba(14,27,41,.08);
  --btn-height:52px; --btn-radius:14px; --btn-font:16px; --btn-shadow:0 10px 22px rgba(10,132,255,.18);
  --wrap-width:min(820px, calc(100% - clamp(32px,6vw,120px)));
  --space:clamp(18px, 4vw, 32px);
  --title-size:clamp(26px, 3vw + 1rem, 34px);
  --card-padding:clamp(18px, 3vw, 26px);
  --hero-image:url('../img/baby.jpg');
  --hero-tint:rgba(247,250,255,.86);
  --btn-border-glow:linear-gradient(120deg, rgba(80,169,255,.85), rgba(173,108,255,.68), rgba(255,255,255,.92));
  --btn-sheen:linear-gradient(160deg, rgba(255,255,255,.32), rgba(255,255,255,0) 72%);
  --btn-base:linear-gradient(140deg, rgba(14,24,44,.42), rgba(44,59,94,.18));
}
*{box-sizing:border-box}
body{margin:0;color:var(--text);font-family:-apple-system,BlinkMacSystemFont,"SF Pro Display",system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;-webkit-font-smoothing:antialiased;min-height:100vh;position:relative;overflow-x:hidden;display:flex;justify-content:center;text-shadow:0 1px 0 rgba(255,255,255,.55)}
div{background-color:transparent}
body.modal-open{overflow:hidden}
body::before,body::after{content:"";position:fixed;inset:0;z-index:-2;pointer-events:none;transition:opacity .6s ease}
body::before{background-image:var(--hero-image);background-size:cover;background-position:50% 32%;background-repeat:no-repeat;filter:saturate(108%) contrast(102%)}
:root.no-hero-image body::before{opacity:0}
:root.no-hero-image body::after{background:linear-gradient(180deg,#f9fbff 0%,#eff3f8 100%)}
.wrap{width:var(--wrap-width);margin:auto;max-width:100%;padding:var(--space) calc(22px + env(safe-area-inset-left,0));padding-right:calc(22px + env(safe-area-inset-right,0));animation:fadeSlide .6s ease both;transition:opacity .28s ease,filter .28s ease,transform .28s ease;will-change:opacity,filter,transform}
h1{font-size:var(--title-size);font-weight:800;margin:8px 0 22px;letter-spacing:-.3px;animation:softDrop .7s ease both .12s;line-height:1.12;color:#0c1f3a;text-shadow:0 12px 28px rgba(8,16,40,.35),0 2px 0 rgba(255,255,255,.8)}
.card{background:var(--surface);border:1px solid rgba(227,234,242,.7);border-radius:var(--radius);box-shadow:var(--shadow);padding:var(--card-padding);backdrop-filter:saturate(160%) blur(12px);animation:floatUp .7s ease both .18s}
.row{display:flex;gap:var(--gap)} .col{flex:1}
.row-center{align-items:center}
.row-between{justify-content:space-between}
.action-row{flex-wrap:wrap}
.action-row .btn{flex:1 1 clamp(160px,45%,100%);min-width:calc(50% - var(--gap)/2)}
.action-row .btn + .btn{margin-top:0}
.avatar{width:72px;height:72px;border-radius:24px;background:linear-gradient(135deg,#f2f6fc,#e3ecfa);display:grid;place-items:center;font-size:32px;box-shadow:inset 0 2px 10px rgba(255,255,255,.9);border:0;cursor:pointer;transition:transform .2s ease, box-shadow .2s ease}
.avatar-btn:focus-visible{outline:3px solid rgba(10,132,255,.35);outline-offset:3px}
.avatar-btn:hover{transform:translateY(-1px);box-shadow:0 18px 34px rgba(14,27,41,.18)}
.avatar-btn:active{transform:translateY(0)}
.leo-name{font-size:20px;font-weight:800;letter-spacing:-.2px}
.info-btn{background:none;border:0;padding:0;text-align:left;color:inherit;display:grid;gap:4px;cursor:pointer;width:100%}
.info-btn:focus-visible{outline:3px solid rgba(10,132,255,.35);outline-offset:4px;border-radius:12px}
.chevron-btn{background:none;border:0;font-size:26px;color:rgba(14,27,41,.35);cursor:pointer;padding:4px 6px;border-radius:12px;transition:color .2s ease, transform .2s ease}
.chevron-btn:hover{color:var(--text);transform:translateX(2px)}
.chevron-btn:focus-visible{outline:3px solid rgba(10,132,255,.35);outline-offset:3px}
.card-tap{cursor:pointer;transition:transform .25s ease, box-shadow .25s ease}
.card-tap:hover{transform:translateY(-2px);box-shadow:0 26px 50px rgba(14,27,41,.13)}
.card-tap:active{transform:translateY(0)}
.chevron{font-size:26px;color:rgba(14,27,41,.35);display:flex;align-items:center}
.section-head{display:flex;align-items:center;gap:10px;flex-wrap:wrap;justify-content:space-between}
.section-head strong{font-size:18px}
.history-empty{padding:18px;text-align:center;color:var(--muted);border:1px dashed rgba(198,209,223,.6);border-radius:14px;background:rgba(255,255,255,.6)}
.report-line{margin-top:18px;padding-top:14px;border-top:1px solid rgba(198,209,223,.6);font-size:14px;color:var(--muted);display:flex;flex-wrap:wrap;gap:6px 12px}
.report-line strong{color:var(--text);font-size:15px}
.report-line span{display:inline-flex;align-items:center;gap:6px;background:rgba(243,247,251,.8);padding:6px 10px;border-radius:999px;border:1px solid rgba(198,209,223,.35);color:var(--text);font-size:13px}
.stack .list{margin-top:4px}
.pane{display:grid;gap:var(--gap);flex-grow:1}
.pane-timer{justify-content:space-around}
.is-hidden{display:none !important}
.seg-sides{gap:0;margin:0 calc(-1 * var(--card-padding));border-radius:12px;overflow:hidden;background:rgba(239,243,247,.7)}
.seg-sides button{border-radius:0;border-left:1px solid rgba(198,209,223,.6)}
.seg-sides button:first-child{border-left:none}
.timer-shell{text-align:center;padding:24px 0}
.timer-shell .btn{margin-top:18px}
.time-note{min-height:1.2em;margin-top:6px}
.btn-compact{width:auto;padding:8px 14px;min-height:44px}
.field-spaced{margin-top:12px}
.modal-header{align-items:center;justify-content:space-between;margin-bottom:6px}
.badge-live{display:inline-flex;align-items:center;gap:6px;padding:4px 10px;border-radius:999px;background:rgba(10,110,255,.1);color:var(--primary);font-weight:600;font-size:13px}
.btn{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  width:100%;
  padding:0 22px;
  height:var(--btn-height);
  min-height:var(--btn-height);
  border-radius:var(--btn-radius);
  border:1px solid rgba(173,196,255,.46);
  cursor:pointer;
  font-weight:700;
  font-size:var(--btn-font);
  letter-spacing:.24px;
  text-transform:uppercase;
  text-decoration:none;
  transition:transform .22s ease, filter .24s ease, box-shadow .3s ease, background .3s ease;
  color:#eef4ff;
  background:var(--btn-base);
  box-shadow:0 24px 40px rgba(8,16,40,.24), inset 0 0 0 1px rgba(255,255,255,.08);
  backdrop-filter:blur(18px) saturate(160%);
  -webkit-backdrop-filter:blur(18px) saturate(160%);
  position:relative;
  overflow:visible;
  isolation:isolate;
  transform-origin:center;
}
.btn::before{
  content:"";
  position:absolute;
  inset:-4px;
  border-radius:inherit;
  background:var(--btn-border-glow);
  filter:blur(14px);
  opacity:.55;
  z-index:-2;
  transition:opacity .3s ease, filter .3s ease, transform .35s ease;
}
.btn::after{
  content:"";
  position:absolute;
  inset:1px;
  border-radius:calc(var(--btn-radius) - 2px);
  background:var(--btn-sheen);
  opacity:.35;
  pointer-events:none;
  transition:opacity .3s ease, transform .3s ease;
}
.btn .btn-icon{
  display:inline-flex;
  margin-right:10px;
  font-size:1.15em;
  transition:transform .32s ease, opacity .32s ease;
}
.btn .btn-subtext{
  display:block;
  font-size:12px;
  letter-spacing:0;
  opacity:.8;
  text-transform:none;
}
@media (hover:hover){
  .btn:hover{
    transform:translateY(-3px) scale(1.01);
    filter:brightness(1.05) saturate(1.05);
    box-shadow:0 30px 52px rgba(10,20,49,.28), inset 0 0 0 1px rgba(255,255,255,.12);
  }
  .btn:hover::before{
    opacity:.78;
    filter:blur(18px);
    transform:scale(1.02);
  }
  .btn:hover::after{
    opacity:.58;
    transform:translateY(-2px);
  }
  .btn:hover .btn-icon{
    transform:translateX(3px);
  }
}
.btn:active{
  transform:translateY(1px) scale(.985);
  filter:brightness(.97);
  box-shadow:0 16px 30px rgba(8,16,40,.22);
}
.btn:active::after{
  opacity:.25;
  transform:translateY(0);
}
.btn:focus-visible{
  outline:3px solid rgba(120,182,255,.55);
  outline-offset:4px;
}
.btn:focus-visible::before{
  opacity:.9;
}
.btn:disabled,
.btn[aria-disabled="true"]{
  cursor:not-allowed;
  opacity:.6;
  filter:saturate(.75);
  box-shadow:none;
  transform:none;
}
.btn:disabled::before,
.btn[aria-disabled="true"]::before{
  opacity:.35;
  filter:blur(10px);
}
.btn-primary{--btn-border-glow:linear-gradient(120deg, rgba(10,132,255,.92), rgba(79,129,255,.85), rgba(180,216,255,.95));background:linear-gradient(150deg, rgba(10,42,94,.65), rgba(22,109,214,.55));color:#f8fbff;text-shadow:0 0 18px rgba(72,170,255,.75)}
.btn-success{--btn-border-glow:linear-gradient(120deg, rgba(109,255,198,.9), rgba(16,201,131,.8), rgba(255,255,255,.9));background:linear-gradient(150deg, rgba(11,52,44,.55), rgba(24,141,96,.55));color:#effff9;text-shadow:0 0 16px rgba(96,255,210,.65)}
.btn-warning{--btn-border-glow:linear-gradient(120deg, rgba(255,196,120,.9), rgba(255,118,102,.75), rgba(255,255,255,.85));background:linear-gradient(150deg, rgba(64,34,10,.55), rgba(201,108,32,.58));color:#fff4e6;text-shadow:0 0 14px rgba(255,178,102,.75)}
.btn-ghost{background:linear-gradient(160deg, rgba(240,245,255,.2), rgba(240,245,255,.05));color:var(--text);border-color:rgba(198,209,223,.5);box-shadow:0 12px 32px rgba(20,24,40,.12)}
.view-switcher{position:relative;display:inline-flex;align-items:center;gap:10px}
.icon-btn{display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border-radius:12px;border:1px solid rgba(198,209,223,.55);background:linear-gradient(160deg, rgba(255,255,255,.78), rgba(244,248,255,.6));color:var(--text);font-weight:700;font-size:14px;cursor:pointer;transition:transform .2s ease, box-shadow .25s ease, border-color .2s ease, background .25s ease;box-shadow:0 10px 24px rgba(14,27,41,.12);backdrop-filter:blur(14px);-webkit-backdrop-filter:blur(14px)}
.icon-btn .label{font-size:14px}
.icon-btn .caret{font-size:12px;opacity:.65;transition:transform .2s ease}
.icon-btn:focus-visible{outline:3px solid rgba(120,182,255,.45);outline-offset:3px}
.icon-btn[aria-expanded="true"] .caret{transform:rotate(180deg)}
@media (hover:hover){
  .icon-btn:hover{transform:translateY(-2px);box-shadow:0 16px 32px rgba(12,24,40,.18);border-color:rgba(120,182,255,.4)}
  .icon-btn:hover .caret{transform:translateY(-1px)}
}
.icon-btn:active{transform:translateY(0);box-shadow:0 12px 26px rgba(12,24,40,.14)}
.icon-calendar{width:18px;height:18px;display:inline-block;background-color:currentColor;background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="17" rx="3" ry="3"/><path d="M8 2v4M16 2v4" stroke-linecap="round"/><path d="M3 10h18"/><circle cx="8.5" cy="14.5" r="1.6" fill="currentColor"/><circle cx="12" cy="14.5" r="1.6" fill="currentColor"/><circle cx="15.5" cy="14.5" r="1.6" fill="currentColor"/></svg>');background-repeat:no-repeat;background-position:center;background-size:16px 16px;mask:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"><rect x="3" y="4" width="18" height="17" rx="3" ry="3" stroke="currentColor" stroke-width="2"/><path d="M8 2v4M16 2v4" stroke="currentColor" stroke-width="2" stroke-linecap="round"/><path d="M3 10h18" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="14.5" r="1.6" fill="currentColor"/><circle cx="12" cy="14.5" r="1.6" fill="currentColor"/><circle cx="15.5" cy="14.5" r="1.6" fill="currentColor"/></svg>') center/16px 16px no-repeat;-webkit-mask:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"><rect x="3" y="4" width="18" height="17" rx="3" ry="3" stroke="currentColor" stroke-width="2"/><path d="M8 2v4M16 2v4" stroke="currentColor" stroke-width="2" stroke-linecap="round"/><path d="M3 10h18" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="14.5" r="1.6" fill="currentColor"/><circle cx="12" cy="14.5" r="1.6" fill="currentColor"/><circle cx="15.5" cy="14.5" r="1.6" fill="currentColor"/></svg>') center/16px 16px no-repeat}
.range-menu{position:absolute;top:calc(100% + 10px);left:0;display:grid;gap:6px;padding:12px;background:linear-gradient(180deg, rgba(255,255,255,.9), rgba(240,245,255,.92));border-radius:16px;border:1px solid rgba(198,209,223,.7);box-shadow:0 22px 44px rgba(6,16,36,.18);min-width:min(220px, 90vw);max-width:min(280px, 90vw);z-index:4;opacity:0;pointer-events:none;transform:translateY(8px);transition:opacity .2s ease, transform .2s ease}
.range-menu::before{content:"";position:absolute;top:-8px;left:24px;width:16px;height:16px;background:inherit;border-top:1px solid rgba(198,209,223,.7);border-left:1px solid rgba(198,209,223,.7);transform:rotate(45deg);z-index:-1}
.range-menu.is-open{opacity:1;pointer-events:auto;transform:translateY(0)}
.range-option{display:flex;align-items:center;gap:10px;padding:10px 12px;border-radius:12px;border:0;background:transparent;color:var(--text);font-weight:600;font-size:14px;cursor:pointer;transition:background .18s ease,color .18s ease}
.range-option .icon-calendar{width:16px;height:16px;opacity:.55}
@media (hover:hover){
  .range-option:hover{background:rgba(10,132,255,.08);color:var(--primary)}
  .range-option:hover .icon-calendar{opacity:.9}
}
.range-option:focus-visible{outline:2px solid rgba(120,182,255,.6);outline-offset:2px}
.range-option.active{background:rgba(10,132,255,.14);color:var(--primary)}
.range-option.active .icon-calendar{opacity:1;color:var(--primary)}
.stack{display:grid;gap:var(--gap)}
.list{display:grid;gap:12px}
.item{background:var(--surface);border:1px solid rgba(227,234,242,.85);border-radius:14px;padding:14px;box-shadow:0 8px 20px rgba(14,27,41,.05);position:relative;overflow:hidden;display:flex;align-items:center;gap:14px}
.item-content{display:grid;gap:6px;flex:1}
.item-content strong{font-weight:700;font-size:15px;letter-spacing:.18px;color:var(--text)}
#feed-history .item{flex-direction:column;align-items:flex-start;gap:10px;padding:16px 18px}
.feed-history-line{font-weight:600;color:var(--text)}
#feed-history .item .item-note{width:100%}
.item.enter{animation:popIn .45s cubic-bezier(.33,1,.68,1) both}
.item.exiting{opacity:0;transform:translateY(6px);transition:opacity .18s ease, transform .18s ease}
.item::before{content:"";position:absolute;inset:0;background:linear-gradient(180deg,rgba(255,255,255,.25),rgba(255,255,255,0));opacity:0;transition:opacity .3s ease;pointer-events:none}
.item:hover::before{opacity:1}
.item-content{flex:1;position:relative;z-index:1;display:grid;gap:2px}
.item-meta{font-size:13px;color:var(--muted);display:grid;gap:4px}
.item-meta-time{font-weight:600;color:var(--text);letter-spacing:.12px}
.item-meta-tag{display:inline-flex;align-items:center;gap:6px;padding:4px 10px;border-radius:999px;background:rgba(10,132,255,.12);color:var(--primary);font-size:11px;text-transform:uppercase;letter-spacing:.4px}
.item-note{display:block;background:rgba(248,251,255,.85);border-radius:14px;padding:8px 12px;border:1px solid rgba(173,196,255,.35);color:var(--text);font-size:12px;line-height:1.4;box-shadow:inset 0 1px 0 rgba(255,255,255,.65);white-space:pre-wrap}
.item-delete{width:32px;height:32px;border-radius:50%;border:1px solid rgba(198,209,223,.7);background:rgba(243,247,251,.9);display:grid;place-items:center;color:rgba(14,27,41,.4);cursor:pointer;transition:all .2s ease;flex-shrink:0;position:relative;z-index:1}
.item-delete:hover{color:var(--text);background:#fff;box-shadow:0 8px 16px rgba(14,27,41,.12)}
.item-delete:active{transform:scale(.94)}
.item-delete span{font-size:18px;line-height:1}
.muted{color:var(--muted)}
.pill{padding:.25rem .6rem;border-radius:999px;border:1px solid var(--line);font-size:12px;color:var(--muted)}

/* Modal */
.modal{position:fixed;inset:0;background:linear-gradient(140deg,rgba(10,20,40,.46),rgba(241,246,255,.6));backdrop-filter:blur(18px);-webkit-backdrop-filter:blur(18px);display:flex;align-items:center;justify-content:center;opacity:0;visibility:hidden;transition:opacity .28s ease,visibility .28s ease}
.modal.open{opacity:1;visibility:visible}
body.modal-open .wrap{opacity:.45;filter:blur(2px);transform:scale(.99);pointer-events:none}
.sheet{background:linear-gradient(180deg,rgba(12,22,44,.29),rgba(42,64,110,.18),rgba(255,255,255,.11));backdrop-filter:blur(26px) saturate(155%);-webkit-backdrop-filter:blur(26px) saturate(155%);width:100%;height:100%;max-width:740px;margin:0 auto;padding:24px calc(18px + env(safe-area-inset-left,0));padding-right:calc(18px + env(safe-area-inset-right,0));display:flex;flex-direction:column;border:1px solid rgba(173,196,255,.28);border-radius:28px;box-shadow:0 38px 80px rgba(8,16,40,.26);transform:translateY(18px);opacity:0;transition:transform .32s ease,opacity .32s ease;color:#f5f7ff}
.sheet h2,.sheet label,.sheet strong,.sheet .muted{color:#f5f7ff;text-shadow:0 2px 12px rgba(6,10,26,.5)}
.modal.open .sheet{transform:translateY(0);opacity:1}

.seg{display:flex;gap:10px}
.seg button{flex:1;padding:0 16px;height:48px;border-radius:12px;border:1px solid rgba(198,209,223,.8);background:#eff3f7;font-weight:700;font-size:15px;transition:all .18s ease}
.seg button.active{background:var(--primary);color:#fff;border-color:transparent}
.scale{display:flex;gap:10px}
.scale button{flex:1;padding:0 14px;height:48px;border-radius:12px;border:1px solid rgba(198,209,223,.85);background:#eff3f7;font-size:16px;font-weight:600;transition:all .18s ease}
.scale button.active{background:var(--primary);color:#fff;border-color:transparent}
.field{display:grid;gap:8px}
.input{width:100%;padding:14px 16px;border-radius:12px;border:1px solid rgba(198,209,223,.6);font-size:17px;background:linear-gradient(160deg,rgba(255,255,255,.92),rgba(233,240,255,.6));box-shadow:0 12px 28px rgba(12,22,44,.12),inset 0 0 0 1px rgba(255,255,255,.35);transition:border-color .18s ease, box-shadow .18s ease}
.input.textarea{min-height:108px;resize:vertical;line-height:1.4;padding-top:14px;padding-bottom:14px}
.input[type=datetime-local]{font-size:16px}
select.input{appearance:none;background:rgba(255,255,255,.92) url('data:image/svg+xml,%3Csvg width="12" height="8" viewBox="0 0 12 8" xmlns="http://www.w3.org/2000/svg"%3E%3Cpath d="M1 1l5 5 5-5" stroke="%236c7a88" stroke-width="1.5" fill="none" stroke-linecap="round"/%3E%3C/svg%3E') no-repeat right 14px center;background-size:12px;padding-right:40px}
.form-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:var(--gap)}
.form-grid .field{margin:0}
.form-grid .field.span-2{grid-column:span 2}
.input:focus{border-color:rgba(120,182,255,.75);box-shadow:0 0 0 4px rgba(80,160,255,.2),0 18px 32px rgba(12,22,44,.18);outline:none}
.time{font-variant:tabular-nums;font-size:46px;font-weight:700;letter-spacing:1px}
.footer{display:flex;gap:14px;margin-top:14px}

#start-time-display{font-size:15px}

.sheet h2{font-size:26px;font-weight:800;margin:0 0 6px}
.sheet label{font-weight:600;color:var(--muted);font-size:15px}

/* Tap targets on mobile */
@media (pointer:coarse){ .btn,.seg button,.scale button{min-height:48px} }

@media screen and (min-width:390px) and (min-height:800px){
  :root{ --btn-height:56px; --btn-font:17px; --btn-radius:16px }
  .wrap{max-width:780px;padding:32px calc(26px + env(safe-area-inset-left,0));padding-right:calc(26px + env(safe-area-inset-right,0))}
  .card{padding:24px}
  h1{font-size:32px}
  .seg button,.scale button{height:52px;font-size:16px}
}

@media screen and (min-width:430px) and (min-height:880px){
  :root{ --btn-height:60px }
  .wrap{max-width:820px}
  h1{font-size:34px}
  .sheet{max-width:780px}
  .time{font-size:50px}
}

@media screen and (max-width:420px){
  .row{flex-direction:column}
  .btn{width:100%}
}

@media screen and (max-width:600px){
  .wrap{--wrap-width:calc(100% - clamp(18px,10vw,48px));padding:clamp(18px,6vw,28px)}
  .card{padding:calc(var(--card-padding) - 4px)}
  .action-row .btn{flex:1 1 100%}
  .section-head strong{font-size:17px}
  .seg-sides{margin:0 calc(-1 * (var(--card-padding) - 6px))}
  .form-grid{grid-template-columns:1fr}
  .form-grid .
