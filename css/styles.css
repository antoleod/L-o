:root{
  --bg:#f7fafd; --surface:#ffffff; --text:#0e1b29; --muted:#6c7a88; --line:#e3eaf2; --primary:#0a84ff; --success:#34c759;
  --radius:16px; --gap:20px; --shadow:0 18px 36px rgba(14,27,41,.08);
  --btn-height:52px; --btn-radius:14px; --btn-font:16px; --btn-shadow:0 10px 22px rgba(10,132,255,.18);
  --wrap-width:min(820px, calc(100% - clamp(32px,6vw,120px)));
  --space:clamp(16px, 4vw, 28px);
  --title-size:clamp(26px, 3vw + 1rem, 34px);
  --card-padding:clamp(18px, 3vw, 26px);
  --hero-image:url('../img/baby.jpg');
  --hero-tint:rgba(247,250,255,.86);
  --btn-border-glow:linear-gradient(120deg, rgba(80,169,255,.85), rgba(173,108,255,.68), rgba(255,255,255,.92));
  --btn-sheen:linear-gradient(160deg, rgba(255,255,255,.32), rgba(255,255,255,0) 72%);
  --btn-base:linear-gradient(140deg, rgba(14,24,44,.42), rgba(44,59,94,.18));
}

*{box-sizing:border-box}
html{scroll-behavior:smooth}
body{
  margin:0;
  color:var(--text);
  font-family:-apple-system,BlinkMacSystemFont,"SF Pro Display",system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
  -webkit-font-smoothing:antialiased;
  min-height:100vh;
  position:relative;
  overflow-x:hidden;
  overflow-y:auto;
  text-shadow:0 1px 0 rgba(255,255,255,.55);
  line-height:1.55;
  background:var(--bg);
}
body.modal-open{overflow:hidden} /* No change here, just for context */
body::before,body::after{content:"";position:fixed;inset:0;z-index:-2;pointer-events:none;transition:opacity .6s ease}
body::before{background-image:var(--hero-image);background-size:cover;background-position:50% 32%;background-repeat:no-repeat;filter:saturate(108%) contrast(102%)}
:root.no-hero-image body::before{opacity:0}
:root.no-hero-image body::after{background:linear-gradient(180deg,#f9fbff 0%,#eff3f8 100%)}
.wrap{
  width:var(--wrap-width);
  margin:0 auto;
  max-width:100%;
  padding:var(--space) calc(22px + env(safe-area-inset-left,0));
  padding-right:calc(22px + env(safe-area-inset-right,0));
  padding-bottom:clamp(32px,10vw,72px);
  animation:fadeSlide .5s ease-out both;
  transition:opacity .28s ease,filter .28s ease,transform .28s ease;
  will-change:opacity,filter,transform;
  display:grid;
  gap:clamp(20px,5vw,36px);
}
h1{font-size:var(--title-size);font-weight:800;margin:8px 0 22px;letter-spacing:-.3px;animation:softDrop .7s ease both .12s;line-height:1.12;color:#0c1f3a;text-shadow:0 1px 0 rgba(255,255,255,.7), 0 2px 3px rgba(8,16,40,.2), 0 8px 12px rgba(8,16,40,.2), 0 18px 30px rgba(8,16,40,.15)}
.card{background:var(--surface);border:1px solid rgba(227,234,242,.7);border-radius:var(--radius);box-shadow:var(--shadow);padding:var(--card-padding);backdrop-filter:saturate(160%) blur(12px);animation:floatUp .7s ease both .18s;display:flex;align-items:center;gap:clamp(12px,4vw,20px)}
.card .col{display:grid;gap:6px}
.row{display:flex;flex-wrap:wrap;gap:clamp(12px,3vw,20px);align-items:stretch} .col{flex:1}
.primary-actions{display:grid;gap:clamp(12px,4vw,24px);grid-template-columns:repeat(auto-fit,minmax(160px,1fr))}
.primary-actions > .btn{display:inline-flex;justify-content:center;width:100%;min-height:var(--btn-height);font-size:clamp(15px,2.8vw,17px);box-shadow:0 18px 40px rgba(10,25,60,.18)}
.row-center{align-items:center;gap:16px}
.row-between{justify-content:space-between}
.action-row{flex-wrap:wrap}
.text-center {
  text-align: center;
}

.action-row .btn{flex:1 1 clamp(160px,45%,100%);min-width:calc(50% - var(--gap)/2)}
.action-row .btn + .btn{margin-top:0}
.avatar{width:72px;height:72px;border-radius:24px;background:linear-gradient(135deg,#f2f6fc,#e3ecfa);display:grid;place-items:center;font-size:32px;box-shadow:inset 0 2px 10px rgba(255,255,255,.9);border:0;cursor:pointer;transition:transform .2s ease, box-shadow .2s ease}
.avatar-btn:focus-visible{outline:3px solid rgba(10,132,255,.35);outline-offset:3px}
.avatar-btn:hover{transform:translateY(-1px);box-shadow:0 18px 34px rgba(14,27,41,.18)}
.avatar-btn:active{transform:translateY(0)}
.leo-name{font-size:20px;font-weight:800;letter-spacing:-.2px}
.info-btn{background:none;border:0;padding:0;text-align:left;color:inherit;display:grid;gap:4px;cursor:pointer;width:100%}
.info-btn:focus-visible{outline:3px solid rgba(10,132,255,.35);outline-offset:4px;border-radius:12px}
.chevron-btn{background:none;border:0;font-size:26px;color:rgba(14,27,41,.35);cursor:pointer;padding:4px 6px;border-radius:12px;transition:color .2s ease, transform .2s ease}
.chevron-btn:hover{color:var(--text);transform:translateX(2px)}
.chevron-btn:focus-visible{outline:3px solid rgba(10,132,255,.35);outline-offset:3px}
.card-tap{cursor:pointer;transition:transform .25s ease, box-shadow .25s ease}
.card-tap:hover{transform:translateY(-2px);box-shadow:0 26px 50px rgba(14,27,41,.13)}
.card-tap:active{transform:translateY(0)}
.chevron{font-size:26px;color:rgba(14,27,41,.35);display:flex;align-items:center}
.section-head{display:flex;align-items:center;gap:12px;flex-wrap:wrap;justify-content:space-between;padding:6px 4px;margin-bottom:4px}
.section-head strong{font-size:clamp(18px,3.5vw,20px);letter-spacing:-.01em}
.history-empty{padding:20px;text-align:center;color:var(--muted);border:1px dashed rgba(198,209,223,.6);border-radius:16px;background:rgba(255,255,255,.7);font-size:clamp(14px,3.2vw,15px);line-height:1.5}
.report-line{margin-top:18px;padding-top:14px;border-top:1px solid rgba(198,209,223,.6);font-size:14px;color:var(--muted);display:flex;flex-wrap:wrap;gap:6px 12px}
.report-line strong{color:var(--text);font-size:15px}
.report-line span{display:inline-flex;align-items:center;gap:6px;background:rgba(243,247,251,.8);padding:6px 10px;border-radius:999px;border:1px solid rgba(198,209,223,.35);color:var(--text);font-size:13px}
.stack .list{margin-top:4px}
.pane{display:grid;gap:var(--gap);flex-grow:1}
.pane-timer{justify-content:space-around}
.is-hidden{display:none !important}
.seg-sides{gap:0;margin:0 calc(-1 * var(--card-padding));border-radius:12px;overflow:hidden;background:rgba(239,243,247,.7)}
.seg-sides button{border-radius:0;border-left:1px solid rgba(198,209,223,.6)}
.seg-sides button:first-child{border-left:none}
.timer-shell{text-align:center;padding:24px 0}
.timer-shell .btn{margin-top:18px}
.time-note{min-height:1.2em;margin-top:6px}
.btn-compact{width:auto;padding:8px 14px;min-height:44px}
.btn.btn-ghost.btn-compact{
  background:rgba(255,255,255,.5);
  backdrop-filter:blur(14px);
  -webkit-backdrop-filter:blur(14px);
}
.field-spaced{margin-top:12px}
.modal-header{align-items:center;justify-content:space-between;margin-bottom:6px}
.badge-live{display:inline-flex;align-items:center;gap:6px;padding:4px 10px;border-radius:999px;background:rgba(10,110,255,.1);color:var(--primary);font-weight:600;font-size:13px}
.btn{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  width:100%;
  padding:0 22px;
  height:var(--btn-height);
  min-height:var(--btn-height);
  border-radius:var(--btn-radius);
  border:1px solid rgba(173,196,255,.46);
  cursor:pointer;
  font-weight:700;
  font-size:var(--btn-font);
  letter-spacing:.24px;
  text-transform:uppercase;
  text-decoration:none;
  transition:transform .22s ease, filter .24s ease, box-shadow .3s ease, background .3s ease;
  color:#eef4ff;
  background:var(--btn-base);
  box-shadow:0 24px 40px rgba(8,16,40,.24), inset 0 0 0 1px rgba(255,255,255,.08);
  backdrop-filter:blur(18px) saturate(160%);
  -webkit-backdrop-filter:blur(18px) saturate(160%);
  position:relative;
  overflow:visible;
  isolation:isolate;
  transform-origin:center;
}
.btn::before{
  content:"";
  position:absolute;
  inset:-4px;
  border-radius:inherit;
  background:var(--btn-border-glow);
  filter:blur(14px);
  opacity:.55;
  z-index:-2;
  transition:opacity .3s ease, filter .3s ease, transform .35s ease;
}
.btn::after{
  content:"";
  position:absolute;
  inset:1px;
  border-radius:calc(var(--btn-radius) - 2px);
  background:var(--btn-sheen);
  opacity:.35;
  pointer-events:none;
  transition:opacity .3s ease, transform .3s ease;
}
.btn .btn-icon{
  display:inline-flex;
  margin-right:10px;
  font-size:1.15em;
  transition:transform .32s ease,opacity .32s ease;
}
.primary-actions .btn .btn-icon{margin-right:12px;font-size:1.35em}
.btn .btn-subtext{
  display:block;
  font-size:12px;
  letter-spacing:0;
  opacity:.8;
  text-transform:none;
}
@media (hover:hover){
  .btn:hover{
    transform:translateY(-3px) scale(1.01);
    filter:brightness(1.05) saturate(1.05);
    box-shadow:0 30px 52px rgba(10,20,49,.28), inset 0 0 0 1px rgba(255,255,255,.12);
  }
  .btn:hover::before{
    opacity:.78;
    filter:blur(18px);
    transform:scale(1.02);
  }
  .btn:hover::after{
    opacity:.58;
    transform:translateY(-2px);
  }
  .btn:hover .btn-icon{
    transform:translateX(3px);
  }
}
.btn:active{
  transform:translateY(1px) scale(.985);
  filter:brightness(.97);
  box-shadow:0 16px 30px rgba(8,16,40,.22);
}
.btn:active::after{
  opacity:.25;
  transform:translateY(0);
}
.btn:focus-visible{
  outline:3px solid rgba(120,182,255,.55);
  outline-offset:4px;
}
.btn:focus-visible::before{
  opacity:.9;
}
.btn:disabled,
.btn[aria-disabled="true"]{
  cursor:not-allowed;
  opacity:.6;
  filter:saturate(.75);
  box-shadow:none;
  transform:none;
}
.btn:disabled::before,
.btn[aria-disabled="true"]::before{
  opacity:.35;
  filter:blur(10px);
}
.btn-primary{--btn-border-glow:linear-gradient(120deg, rgba(10,132,255,.92), rgba(79,129,255,.85), rgba(180,216,255,.95));background:linear-gradient(150deg, rgba(10,42,94,.65), rgba(22,109,214,.55));color:#f8fbff;text-shadow:0 0 18px rgba(72,170,255,.75)}
.btn-success{--btn-border-glow:linear-gradient(120deg, rgba(109,255,198,.9), rgba(16,201,131,.8), rgba(255,255,255,.9));background:linear-gradient(150deg, rgba(11,52,44,.55), rgba(24,141,96,.55));color:#effff9;text-shadow:0 0 16px rgba(96,255,210,.65)}
.btn-warning{--btn-border-glow:linear-gradient(120deg, rgba(255,196,120,.9), rgba(255,118,102,.75), rgba(255,255,255,.85));background:linear-gradient(150deg, rgba(64,34,10,.55), rgba(201,108,32,.58));color:#fff4e6;text-shadow:0 0 14px rgba(255,178,102,.75)}
.btn-info{--btn-border-glow:linear-gradient(120deg, rgba(172,102,255,.9), rgba(120,138,255,.8), rgba(255,255,255,.9));background:linear-gradient(150deg, rgba(44,22,74,.55), rgba(108,64,161,.58));color:#f5f0ff;text-shadow:0 0 16px rgba(190,150,255,.75)}
.btn-info{--btn-border-glow:linear-gradient(120deg, rgba(172,102,255,.9), rgba(120,138,255,.8), rgba(255,255,255,.9));background:linear-gradient(150deg, rgba(44,22,74,.55), rgba(108,64,161,.58));color:#f5f0ff;text-shadow:0 0 16px rgba(190,150,255,.75)}
.btn-ghost {
  background: rgba(255, 255, 255, 0.35);
  color: var(--text, #0e1b29);
  border: 1px solid rgba(198, 209, 223, 0.6);
  box-shadow: 0 12px 28px rgba(20, 24, 40, 0.1);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  transition: background .2s ease, color .2s ease, border-color .2s ease, box-shadow .2s ease, transform .2s ease;
}

@media (hover: hover) {
  .btn-ghost:hover {
    background: rgba(255, 255, 255, 0.6);
    border-color: rgba(120, 182, 255, 0.5);
    color: var(--primary, #0a84ff);
    transform: translateY(-2px);
    box-shadow: 0 16px 32px rgba(12, 24, 40, 0.15);
  }
}

.btn-ghost:active {
  transform: translateY(0);
  box-shadow: 0 8px 20px rgba(20, 24, 40, 0.12);
}
.view-switcher{position:relative;display:flex;align-items:center;gap:8px;flex-wrap:nowrap;background:rgba(255,255,255,.5);border-radius:14px;padding:4px;border:1px solid rgba(198,209,223,.45);box-shadow:0 10px 24px rgba(14,27,41,.12);backdrop-filter:blur(14px);-webkit-backdrop-filter:blur(14px);justify-content:flex-start;}
.view-switcher .pill{display:inline-flex;align-items:center;justify-content:center}
.icon-btn{display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border-radius:12px;border:1px solid rgba(198,209,223,.55);background:linear-gradient(160deg, rgba(255,255,255,.78), rgba(244,248,255,.6));color:var(--text);font-weight:700;font-size:14px;cursor:pointer;transition:transform .2s ease, box-shadow .25s ease, border-color .2s ease, background .25s ease;box-shadow:0 10px 24px rgba(14,27,41,.12);backdrop-filter:blur(14px);-webkit-backdrop-filter:blur(14px)}
.icon-btn .label{font-size:14px}
.icon-btn .caret{font-size:12px;opacity:.65;transition:transform .2s ease}

#history-range-btn {
  padding-left: 10.5px; /* 25% menos de 14px */
  padding-right: 10.5px; /* 25% menos de 14px */
  padding: 8px 12px;
  background: rgba(255,255,255,.8);
  border-color: rgba(255,255,255,.9);
  height: auto;
}
.icon-btn:focus-visible{outline:3px solid rgba(120,182,255,.45);outline-offset:3px}
.icon-calendar{width:18px;height:18px;display:inline-block;background-color:currentColor;background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="17" rx="3" ry="3"/><path d="M8 2v4M16 2v4" stroke-linecap="round"/><path d="M3 10h18"/><circle cx="8.5" cy="14.5" r="1.6" fill="currentColor"/><circle cx="12" cy="14.5" r="1.6" fill="currentColor"/><circle cx="15.5" cy="14.5" r="1.6" fill="currentColor"/></svg>');background-repeat:no-repeat;background-position:center;background-size:16px 16px;mask:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"><rect x="3" y="4" width="18" height="17" rx="3" ry="3" stroke="currentColor" stroke-width="2"/><path d="M8 2v4M16 2v4" stroke="currentColor" stroke-width="2" stroke-linecap="round"/><path d="M3 10h18" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="14.5" r="1.6" fill="currentColor"/><circle cx="12" cy="14.5" r="1.6" fill="currentColor"/><circle cx="15.5" cy="14.5" r="1.6" fill="currentColor"/></svg>') center/16px 16px no-repeat;-webkit-mask:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"><rect x="3" y="4" width="18" height="17" rx="3" ry="3" stroke="currentColor" stroke-width="2"/><path d="M8 2v4M16 2v4" stroke="currentColor" stroke-width="2" stroke-linecap="round"/><path d="M3 10h18" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="14.5" r="1.6" fill="currentColor"/><circle cx="12" cy="14.5" r="1.6" fill="currentColor"/><circle cx="15.5" cy="14.5" r="1.6" fill="currentColor"/></svg>') center/16px 16px no-repeat}
.icon-export{width:18px;height:18px;display:inline-block;background-color:currentColor;background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 3v12"/><path d="M8.5 7.5 12 3l3.5 4.5"/><path d="M5 15v4a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-4"/><path d="M15 15h-6"/></svg>');background-repeat:no-repeat;background-position:center;background-size:16px 16px;mask:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 3v12"/><path d="M8.5 7.5 12 3l3.5 4.5"/><path d="M5 15v4a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-4"/><path d="M15 15h-6"/></svg>') center/16px 16px no-repeat;-webkit-mask:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 3v12"/><path d="M8.5 7.5 12 3l3.5 4.5"/><path d="M5 15v4a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-4"/><path d="M15 15h-6"/></svg>') center/16px 16px no-repeat}
.icon-btn[aria-expanded="true"] .caret{transform:rotate(180deg)}
.icon-btn.icon-btn-secondary{padding:10px 12px;background:linear-gradient(160deg, rgba(240,245,255,.85), rgba(230,238,255,.65));border-color:rgba(198,209,223,.6);color:var(--text);box-shadow:0 12px 26px rgba(12,24,40,.12)}
.icon-btn.icon-btn-secondary .label{font-size:13px;text-transform:none}
.icon-btn.icon-only {
  padding: 8px;
  width: 38px;
  height: auto;
  background: rgba(255,255,255,.8);
  border-color: rgba(255,255,255,.9);
}
.icon-btn .spinner {
  display: none;
  width: 16px;
  height: 16px;
  border: 2px solid currentColor;
  border-top-color: transparent;
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
}
.icon-btn.is-loading .spinner {
  display: block;
}
.icon-btn.is-loading .icon-export {
  display: none;
}
@keyframes spin {
  to { transform: rotate(360deg); }
}
.icon-btn:active{transform:translateY(0);box-shadow:0 12px 26px rgba(12,24,40,.14)}
.range-menu{position:absolute;top:calc(100% + 10px);left:0;display:grid;gap:6px;padding:12px;background:linear-gradient(180deg, rgba(255,255,255,.9), rgba(240,245,255,.92));border-radius:16px;border:1px solid rgba(198,209,223,.7);box-shadow:0 22px 44px rgba(6,16,36,.18);min-width:min(220px, 90vw);max-width:min(280px, 90vw);z-index:4;opacity:0;pointer-events:none;transform:translateY(8px);transition:opacity .2s ease, transform .2s ease}
.range-menu::before{content:"";position:absolute;top:-8px;left:24px;width:16px;height:16px;background:inherit;border-top:1px solid rgba(198,209,223,.7);border-left:1px solid rgba(198,209,223,.7);transform:rotate(45deg);z-index:-1}
.range-menu.is-open{opacity:1;pointer-events:auto;transform:translateY(0)}
.range-option{display:flex;align-items:center;gap:10px;padding:10px 12px;border-radius:12px;border:0;background:transparent;color:var(--text);font-weight:600;font-size:14px;cursor:pointer;transition:background .18s ease,color .18s ease}
.range-option .icon-calendar{width:16px;height:16px;opacity:.55}
.range-option:focus-visible{outline:2px solid rgba(120,182,255,.6);outline-offset:2px}
.range-option.active{background:rgba(10,132,255,.14);color:var(--primary)}
.range-option.active .icon-calendar{opacity:1;color:var(--primary)}
.range-option.range-option-custom{position:relative;flex-wrap:wrap;align-items:flex-start;padding-right:0;cursor:default}
.range-option.range-option-custom.active{color:var(--primary)}
.range-option-custom-trigger{display:flex;align-items:center;gap:10px;width:100%;padding:0;background:none;border:0;color:inherit;font:inherit;text-align:left;cursor:pointer}
.range-option-custom-trigger:focus-visible{outline:2px solid rgba(120,182,255,.6);border-radius:10px}
.range-option.range-option-custom .range-date-input{margin-top:8px;width:100%;border:1px solid rgba(198,209,223,.7);border-radius:10px;padding:8px 10px;font-size:14px;color:var(--text);background:rgba(255,255,255,.9);transition:border-color .2s ease, box-shadow .2s ease}
.range-option.range-option-custom .range-date-input:focus{outline:none;border-color:rgba(10,132,255,.6);box-shadow:0 0 0 3px rgba(10,132,255,.18)}
.range-option.range-option-custom .range-date-input::-webkit-calendar-picker-indicator{cursor:pointer}
.history-actions{display:flex;flex-wrap:wrap;gap:10px;justify-content:flex-end}
.history-actions .btn-compact {
  display: inline-flex;
  width: auto;
  padding: 6px 12px;
  font-size: 13px;
  min-height: 38px;
}
.stack{display:grid;gap:clamp(18px,5vw,28px)}
.list{display:grid;gap:clamp(12px,4vw,18px)}
.history-day-header {
  font-size: 14px;
  font-weight: 700;
  color: var(--muted);
  padding: 10px 16px;
  background: rgba(230, 238, 255, 0.6);
  border-radius: 12px;
  border-bottom: 1px solid rgba(198, 209, 223, 0.6);
  margin-top: 12px;
  text-transform: capitalize;
}
.item{background:linear-gradient(160deg,rgba(255,255,255,.95),rgba(240,246,255,.82));border:1px solid rgba(215,226,246,.8);border-radius:18px;padding:18px 20px;box-shadow:0 12px 28px rgba(14,27,41,.08);position:relative;overflow:hidden;display:flex;align-items:flex-start;gap:16px;transition:transform .18s ease, box-shadow .22s ease}
.item:hover{transform:translateY(-1px);box-shadow:0 16px 36px rgba(12,24,48,.12)}
.item-content{display:grid;gap:6px;flex:1}
.item-content strong{font-weight:700;font-size:15px;letter-spacing:.18px;color:var(--text)}
#feed-history .item{flex-direction:column;align-items:flex-start;gap:10px;padding:16px 18px}
.feed-history-line{font-weight:600;color:var(--text)}
#feed-history .item .item-note{width:100%}
.item.enter{animation:popIn .45s cubic-bezier(.33,1,.68,1) both}
.item.exiting{opacity:0;transform:translateY(6px);transition:opacity .18s ease, transform .18s ease}
.item::before{content:"";position:absolute;inset:0;background:linear-gradient(180deg,rgba(255,255,255,.25),rgba(255,255,255,0));opacity:0;transition:opacity .3s ease;pointer-events:none}
.item:hover::before{opacity:1}
.item-content{flex:1;position:relative;z-index:1;display:grid;gap:6px}
.item-meta{font-size:13px;color:var(--muted);display:flex;flex-wrap:wrap;gap:6px 12px;align-items:center}
.item-meta-time{font-weight:600;color:var(--text);letter-spacing:.12px}
.item-meta-tag{display:inline-flex;align-items:center;gap:6px;padding:4px 10px;border-radius:999px;background:rgba(10,132,255,.12);color:var(--primary);font-size:11px;text-transform:uppercase;letter-spacing:.4px}
.item-note{display:block;background:rgba(248,251,255,.85);border-radius:14px;padding:8px 12px;border:1px solid rgba(173,196,255,.35);color:var(--text);font-size:12px;line-height:1.4;box-shadow:inset 0 1px 0 rgba(255,255,255,.65);white-space:pre-wrap}
.item-actions{display:flex;align-items:center;gap:8px;margin-left:auto}
.item-action{width:32px;height:32px;border-radius:50%;border:1px solid rgba(198,209,223,.7);background:rgba(243,247,251,.9);display:grid;place-items:center;color:rgba(14,27,41,.4);cursor:pointer;transition:all .2s ease;flex-shrink:0;position:relative;z-index:1;gap:12px}
.item-action:hover{color:var(--text);background:#fff;box-shadow:0 8px 16px rgba(14,27,41,.12);transform:scale(1.05)}
.item-action:active{transform:scale(.94)}
.item-action span{font-size:16px;line-height:1}
.item-delete span{font-size:18px}
.history-item-checkbox {
  width: 0;
  height: 20px;
  accent-color: var(--primary);
  margin-right: 0;
  flex-shrink: 0;
  opacity: 0;
  transform: scale(0.5);
  transition: width 0.3s ease, opacity 0.2s ease, margin-right 0.3s ease, transform 0.3s ease;
  pointer-events: none;
}
.is-delete-mode .item { cursor: pointer; }
.is-delete-mode .history-item-checkbox {
  display: block;
  width: 20px;
  opacity: 1;
  margin-right: 8px;
  transform: scale(1);
  pointer-events: auto;
}
.is-delete-mode .item-actions {
  opacity: 0;
  transform: scale(0.5);
  pointer-events: none;
}
.item-actions {
  transition: opacity 0.3s ease, transform 0.3s ease;
}
.is-delete-mode .item.is-selected { border-color: var(--primary); background-color: rgba(10, 132, 255, 0.05); }

.muted{color:var(--muted)}
.pill{padding:4px 10px;border-radius:999px;background:rgba(0,0,0,.1);border:1px solid rgba(198,209,223,.2);font-size:13px;color:var(--text);font-weight:600;margin:0 4px;}

/* Modal */
.modal{position:fixed;inset:0;background:linear-gradient(140deg,rgba(10,20,40,.28),rgba(241,246,255,.32));backdrop-filter:blur(18px);-webkit-backdrop-filter:blur(18px);display:flex;align-items:center;justify-content:center;opacity:0;visibility:hidden;transition:opacity .28s ease,visibility .28s ease;z-index:100}
.modal.open{opacity:1;visibility:visible}
body.modal-open .wrap{opacity:.45;filter:blur(2px);transform:scale(.99);pointer-events:none}
.sheet{background-image:var(--hero-image);background-size:cover;background-position:center;backdrop-filter:blur(26px) saturate(155%) brightness(0.7);-webkit-backdrop-filter:blur(26px) saturate(155%) brightness(0.7);width:100%;max-width:740px;max-height:calc(100vh - 48px);margin:0 auto;padding:24px calc(18px + env(safe-area-inset-left,0));padding-right:calc(18px + env(safe-area-inset-right,0));display:flex;flex-direction:column;border:1px solid rgba(173,196,255,.28);border-radius:28px;box-shadow:0 38px 80px rgba(8,16,40,.26);transform:translateY(18px);opacity:0;transition:transform .32s ease,opacity .32s ease;color:#f5f7ff;overflow-y:auto;position:relative}
.sheet h2,.sheet strong,.sheet .muted{color:#f5f7ff;text-shadow:0 2px 8px rgba(0,0,0,.7)}
.sheet label{display:inline-block;padding:6px 12px;margin-bottom:2px;background:rgba(0,0,0,.25);border-radius:10px;border:1px solid rgba(255,255,255,.1);font-size:14px;font-weight:700;color:#f5f7ff;text-shadow:0 1px 3px rgba(0,0,0,.5);box-shadow:0 8px 16px rgba(0,0,0,.25);backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px)}
.modal.open .sheet{transform:translateY(0);opacity:1}

#modal-mesures .sheet {
  max-width: 520px;
}
#modal-mesures .input {
  font-size: 18px;
}

.seg{display:flex;gap:14px}
.seg button{flex:1;padding:0 16px;height:48px;border-radius:12px;border:1px solid rgba(198,209,223,.8);background:#eff3f7;font-weight:700;font-size:15px;transition:all .18s ease}
.seg button.active{background:var(--primary);color:#fff;border-color:transparent}
#manual-type button:disabled{opacity:.55;cursor:not-allowed}
#manual-type button {
  display: inline-flex;
  align-items: center;
  justify-content: center;
}
.item-delete{width:36px;height:36px;border-radius:50%;border:1px solid rgba(227,150,150,.4);background:rgba(255,230,230,.6);color:rgba(211,47,47,.8);display:grid;place-items:center;cursor:pointer;transition:all .2s ease;flex-shrink:0}
.item-delete:hover{background:rgba(211,47,47,1);color:#fff;box-shadow:0 6px 14px rgba(211,47,47,.3);transform:scale(1.05)}
.item-delete:active{transform:scale(.95)}
.item-delete span{font-size:20px;line-height:1;font-weight:600}
.scale{display:flex;gap:14px}
.scale button{flex:1;padding:0 14px;height:48px;border-radius:12px;border:1px solid rgba(198,209,223,.85);background:#eff3f7;font-size:16px;font-weight:600;transition:all .18s ease}
.scale button.active{background:var(--primary);color:#fff;border-color:transparent}
.field{display:grid;gap:8px}
.input{width:100%;padding:14px 16px;border-radius:12px;border:1px solid rgba(198,209,223,.6);font-size:17px;background:linear-gradient(160deg,rgba(255,255,255,.92),rgba(233,240,255,.6));box-shadow:0 12px 28px rgba(12,22,44,.12),inset 0 0 0 1px rgba(255,255,255,.35);transition:border-color .18s ease, box-shadow .18s ease}
.input.textarea{min-height:108px;resize:vertical;line-height:1.4;padding-top:14px;padding-bottom:14px}
.input[type=datetime-local]{font-size:16px}
select.input{appearance:none;background:rgba(255,255,255,.92) url('data:image/svg+xml,%3Csvg width="12" height="8" viewBox="0 0 12 8" xmlns="http://www.w3.org/2000/svg"%3E%3Cpath d="M1 1l5 5 5-5" stroke="%236c7a88" stroke-width="1.5" fill="none" stroke-linecap="round"/%3E%3C/svg%3E') no-repeat right 14px center;background-size:12px;padding-right:40px}
.form-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:var(--gap)}
.form-grid .field{margin:0}
.form-grid .field.span-2{grid-column:span 2} /* No change here, but context for diff */
.input:focus{border-color:rgba(120,182,255,.75);box-shadow:0 0 0 4px rgba(80,160,255,.2),0 18px 32px rgba(12,22,44,.18);outline:none}
.time{font-variant:tabular-nums;font-size:46px;font-weight:700;letter-spacing:1px}
.time{text-shadow:0 2px 16px rgba(6,10,26,.65)}.footer{display:flex;gap:14px;margin-top:14px}

#start-time-display{font-size:15px}

.sheet h2{font-size:26px;font-weight:800;margin:0 0 6px}
.stats-content{display:flex;flex-direction:column;gap:18px}
.stats-summary{display:grid;gap:12px;grid-template-columns:repeat(auto-fit,minmax(180px,1fr))}
.stat-placeholder{padding:18px;border:1px dashed rgba(198,209,223,.6);border-radius:14px;color:var(--muted);background:rgba(255,255,255,.65);text-align:center;font-size:14px}
.stat-period{grid-column:1 / -1;display:flex;align-items:center;justify-content:space-between;font-size:13px;color:var(--muted);padding:4px 2px;font-weight:600}
.stat-period strong{color:var(--text)}
.stat-period strong{color:#f5f7ff; text-shadow:0 1px 3px rgba(0,0,0,.5);}
.stat-period span:last-child{font-size:12px;font-weight:500;color:rgba(245,247,255,.7); text-shadow:0 1px 3px rgba(0,0,0,.5);}
.stat-card{display:flex;flex-direction:column;gap:6px;padding:16px;border-radius:16px;background:rgba(0,0,0,.15);border:1px solid rgba(255,255,255,.1);box-shadow:0 14px 28px rgba(0,0,0,.2);color:#f5f7ff;text-shadow:0 1px 3px rgba(0,0,0,.5);}
.stat-card{
  flex-direction:row;
  align-items:center;
  gap:16px;
  color:#f5f7ff; /* Asegura que el texto sea claro para la nueva estructura */
}
.stat-icon{
  width:48px;
  height:48px;
  display:grid;
  place-items:center;
  border-radius:14px;
  background:rgba(0,0,0,.2);
  font-size:24px;
  flex-shrink:0;
}
.stat-body{display:grid;gap:4px}
.stat-insights-container{grid-column:1 / -1;display:grid;gap:10px;margin-top:4px}
.stat-insight{display:flex;flex-direction:column;gap:4px;padding:12px 14px;border-radius:14px;background:rgba(15,23,42,.2);border:1px solid rgba(255,255,255,.15);}
.stat-insight-label{font-size:12px;font-weight:600;letter-spacing:.02em;text-transform:uppercase;}
.stat-insight-value{font-size:15px;font-weight:600;}
.stat-insight-sub{font-size:12px;}
.stats-breakdown{display:flex;flex-direction:column;gap:12px;padding:18px;border-radius:18px;background:rgba(0,0,0,.15);border:1px solid rgba(255,255,255,.1);box-shadow:0 12px 24px rgba(0,0,0,.2);color:#f5f7ff}
.stats-breakdown-head{display:flex;align-items:center;justify-content:space-between;gap:12px;color:var(--muted);font-weight:600}
.stats-breakdown-head h3{margin:0;font-size:14px;color:var(--text)}
.stats-day-list{display:flex;flex-direction:column;gap:12px}
.stats-day{display:flex;flex-direction:column;gap:10px;padding:14px 16px;border-radius:14px;background:rgba(255,255,255,.92);border:1px solid rgba(198,209,223,.4);box-shadow:0 10px 18px rgba(15,23,42,.06)}
.stats-day-head{display:flex;align-items:center;justify-content:space-between;font-size:14px;font-weight:600;color:var(--text)}
.stats-day-count{font-size:12px;font-weight:600;color:var(--muted);text-transform:uppercase;letter-spacing:.04em}
.stats-day-metric{display:grid;grid-template-columns:minmax(90px,auto) 1fr auto;align-items:center;gap:12px;font-size:13px}
.stats-day-metric .metric-label{display:flex;align-items:center;gap:6px;color:var(--muted);font-weight:600;text-transform:uppercase;font-size:11px;letter-spacing:.04em}
.metric-dot{width:10px;height:10px;border-radius:999px}
.metric-dot.breast{background:rgba(37,99,235,.85);box-shadow:0 0 0 3px rgba(37,99,235,.15)}
.metric-dot.bottle{background:rgba(249,115,22,.8);box-shadow:0 0 0 3px rgba(249,115,22,.15)}
.metric-bar{position:relative;height:8px;border-radius:999px;background:rgba(148,163,184,.2);overflow:hidden}
.metric-bar .stats-bar{position:absolute;inset:0;width:var(--percent,0%);border-radius:inherit;background:linear-gradient(90deg, rgba(37,99,235,.2), rgba(37,99,235,.85));transition:width .18s ease-out}
.metric-bar .stats-bar.bottle{background:linear-gradient(90deg, rgba(249,115,22,.2), rgba(249,115,22,.85))}
.stats-day-metric .metric-value{font-weight:600;color:var(--text)}
.stat-card .stat-title{font-size:13px;font-weight:600;text-transform:uppercase;letter-spacing:.04em}
.stat-card .stat-value{font-size:26px;font-weight:800;letter-spacing:.01em}
.stat-card .stat-value small{font-size:16px;font-weight:600;margin-left:4px}
.stat-card .stat-sub{font-size:13px;}
.stats-breakdown h3, .stats-breakdown .muted{color:#f5f7ff;text-shadow:0 1px 3px rgba(0,0,0,.5)}
.stat-insight-label, .stat-insight-value, .stat-insight-sub{color:#f5f7ff;text-shadow:0 1px 3px rgba(0,0,0,.5)}

/* Save Indicator */
.save-indicator{
  position:fixed;
  top:12px;
  left:50%;
  transform:translateX(-50%);
  display:inline-flex;
  align-items:center;
  gap:10px;
  padding:8px 16px;
  border-radius:999px;
  background:rgba(255,255,255,.65);
  border:1px solid rgba(198,209,223,.5);
  box-shadow:0 12px 28px rgba(12,22,44,.15);
  backdrop-filter:blur(14px);
  -webkit-backdrop-filter:blur(14px);
  z-index:200;
  font-size:14px;
  font-weight:600;
  color:var(--text);
  transition:opacity .3s ease, transform .3s ease;
  opacity:0;
  transform:translate(-50%, -20px);
  pointer-events:none;
}
.save-indicator[data-state="saving"],
.save-indicator[data-state="synced"],
.save-indicator[data-state="error"],
.save-indicator.is-offline[data-state="idle"] {
  opacity:1;
  transform:translateX(-50%);
}
.save-indicator .save-icon{width:16px;height:16px;border-radius:50%;background:rgba(148,163,184,.5);position:relative}
.save-indicator[data-state="saving"] .save-icon{animation:pulse 1.5s infinite}
.save-indicator[data-state="synced"] .save-icon{background:var(--success)}
.save-indicator[data-state="error"] .save-icon{background:#ef4444}
.save-indicator.is-offline[data-state="idle"] .save-icon{background:#f97316}

@keyframes pulse{
  0%,100%{transform:scale(1);opacity:1}
  50%{transform:scale(1.3);opacity:.7}
}

/* Hover states for non-touch devices */
@media (hover:hover){
  .icon-btn:hover{transform:translateY(-2px);box-shadow:0 16px 32px rgba(12,24,40,.18);border-color:rgba(120,182,255,.4)}
  .icon-btn:hover .caret{transform:translateY(-1px)}
  .icon-btn.icon-btn-secondary:hover{border-color:rgba(120,182,255,.45);background:linear-gradient(160deg, rgba(242,248,255,.95), rgba(224,235,255,.75))}
  .range-option:hover{background:rgba(10,132,255,.08);color:var(--primary)}
  .range-option:hover .icon-calendar{opacity:.9}
}

/* Tap targets on mobile */
@media (pointer:coarse){
  .btn,.seg button,.scale button{min-height:48px}
}

/* Responsive Breakpoints */
@media screen and (max-width:600px){
  .wrap{--wrap-width:calc(100% - clamp(18px,10vw,48px));padding:clamp(18px,6vw,28px)}
  .card{padding:calc(var(--card-padding) - 4px)}
  .action-row .btn{flex:1 1 100%}
  .section-head strong{font-size:17px}
  .seg-sides{margin:0 calc(-1 * (var(--card-padding) - 6px))}
  .form-grid{grid-template-columns:1fr;}
  .form-grid .field.span-2{grid-column:span 1}
  .view-switcher{display:grid;width:100%;grid-template-columns:repeat(2,minmax(0,1fr));gap:8px;align-items:center}
  .view-switcher #history-range-btn{grid-column:1 / -1;justify-content:space-between}
  .view-switcher .pill{grid-column:1 / 2;justify-self:flex-start;padding:.3rem .7rem;font-size:12px}
  .view-switcher .icon-btn{width:100%}
  .view-switcher #export-pdf{grid-column:2 / 3;justify-self:end}
  .primary-actions{grid-template-columns:1fr;gap:clamp(12px,5vw,18px)}
  .primary-actions .btn{min-height:56px;font-size:16px}
  .history-actions{justify-content:center}
  .stats-summary{grid-template-columns:1fr;gap:clamp(12px,5vw,18px)}
  .stats-breakdown{padding:16px}
  .stats-day{padding:12px 14px}
  .stats-day-metric{grid-template-columns:minmax(74px,auto) 1fr auto;gap:10px}
}

@media screen and (max-width:480px){
  .wrap{--wrap-width:calc(100% - 28px);padding:24px 14px; gap: clamp(16px, 5vw, 24px);}
  h1{font-size:clamp(26px,5.6vw,32px);text-align:center;margin-bottom:18px}
  .card{padding:calc(var(--card-padding) - 8px)}
  .history-actions{width:100%;justify-content:center}
  .view-switcher{grid-template-columns:repeat(2,minmax(0,1fr));gap:6px}
  .view-switcher #history-range-btn{justify-content:center;font-size:14px}
  .view-switcher .pill{justify-self:flex-start;font-size:11px}
  .view-switcher #export-pdf{justify-self:flex-end}
  .modal .sheet{max-width:100%;border-radius:22px;padding:20px 18px}
}
@media screen and (max-width:460px){
  .row{flex-direction:column;gap:12px}
}

@media screen and (max-width:420px){
  .btn{width:100%}
  #history-range-btn .label{font-size:13px}
  .view-switcher #export-pdf{padding:10px;max-width:48px}
  .view-switcher #export-pdf .label{display:none}
  .view-switcher .pill{font-size:11px}
}

@media screen and (max-width:360px){
  :root{ --btn-font:15px }
  h1{font-size:clamp(24px,8vw,28px)}
  .avatar{width:60px;height:60px}
  .seg button,.scale button{font-size:14px}
}
/* Larger phones and small tablets */
@media screen and (min-width:390px) and (min-height:800px){
  :root{ --btn-height:56px; --btn-font:17px; --btn-radius:16px }
  .wrap{max-width:780px;padding:32px calc(26px + env(safe-area-inset-left,0));padding-right:calc(26px + env(safe-area-inset-right,0))}
  .card{padding:24px}
  h1{font-size:32px}
  .seg button,.scale button{height:52px;font-size:16px}
}
@media screen and (min-width:430px) and (min-height:880px){
  :root{ --btn-height:60px }
  .wrap{max-width:820px}
  h1{font-size:34px}
  .sheet{max-width:780px}
  .time{font-size:50px}
}
/* Desktop and larger tablets */
@media screen and (min-width:768px){
  .row{gap:calc(var(--gap) + 6px)}
  .pane{grid-template-rows:auto 1fr}
  .timer-shell{padding:28px 0}
  .list{gap:14px}
  .chart-container {
    position: relative;
    height: 40vh;
    min-height: 300px;
  }
  .stats-content .list {
    margin-top: 10px;
    gap: 8px;
  }
  .action-row .btn{flex:1 1 0;min-width:auto}
}

@media screen and (min-width:821px){
  .wrap{--wrap-width:min(820px, calc(100% - 200px))}
}

@media screen and (max-width:768px){
  .card{flex-direction:column;align-items:flex-start;text-align:center}
  .card .col{width:100%}
  .primary-actions{grid-template-columns:repeat(auto-fit,minmax(140px,1fr))}
}
@media (prefers-reduced-motion:reduce){
  *,*::before,*::after{animation-duration:.01ms !important;animation-iteration-count:1 !important;transition-duration:.01ms !important;scroll-behavior:auto !important}
}

@keyframes fadeSlide{
  from{opacity:0;transform:translateY(16px)}
  to{opacity:1;transform:translateY(0)}
}

@keyframes softDrop{
  from{opacity:0;transform:translateY(-10px)}
  to{opacity:1;transform:translateY(0)}
}

@keyframes floatUp{
  from{opacity:0;transform:translateY(20px)}
  to{opacity:1;transform:translateY(0)}
}

@keyframes popIn{
  0%{opacity:0;transform:translateY(18px) scale(.98)}
  60%{opacity:1;transform:translateY(-4px) scale(1.01)}
  100%{opacity:1;transform:translateY(0) scale(1)}
}

/* Estilos para hacer la tarjeta de Léo más pequeña (reducida al 50%) */
#leo-card {
  padding: clamp(8px, 1.5vw, 12px);
  gap: clamp(8px, 2vw, 12px);
  flex-direction: row;
  align-items: center; /* Re-enables vertical centering for items in the row */
}

#leo-card .avatar {
  width: 48px; /* Adjusted for better proportion */
  height: 48px; /* Adjusted for better proportion */
  font-size: 22px;
  border-radius: 12px; /* 50% of 24px */
}

#leo-card .leo-name {
  font-size: 15px; /* Reduced from 20px */
}

#leo-card .info-btn .muted {
  font-size: 12px; /* Adjusted for readability */
}
