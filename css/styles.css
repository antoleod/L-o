:root{
  --bg:#f7fafd; --surface:#ffffff; --text:#0e1b29; --muted:#6c7a88; --line:#e3eaf2; --primary:#0a84ff; --success:#34c759;
  --radius:16px; --gap:16px; --shadow:0 18px 36px rgba(14,27,41,.08);
  --btn-height:52px; --btn-radius:14px; --btn-font:16px; --btn-shadow:0 10px 22px rgba(10,132,255,.18);
  --wrap-width:min(820px, calc(100% - clamp(32px,6vw,120px)));
  --space:clamp(18px, 4vw, 32px);
  --title-size:clamp(26px, 3vw + 1rem, 34px);
  --card-padding:clamp(18px, 3vw, 26px);
  --hero-image:none;
  --hero-tint:rgba(247,250,255,.86);
}
*{box-sizing:border-box}
body{margin:0;color:var(--text);font-family:-apple-system,BlinkMacSystemFont,"SF Pro Display",system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;-webkit-font-smoothing:antialiased;min-height:100vh;position:relative;overflow-x:hidden;display:flex;justify-content:center}
body.modal-open{overflow:hidden}
body::before,body::after{content:"";position:fixed;inset:0;z-index:-2;pointer-events:none;transition:opacity .6s ease}
body::before{background-image:var(--hero-image);background-size:cover;background-position:center;background-repeat:no-repeat;filter:saturate(108%) contrast(102%)}
body::after{background:linear-gradient(180deg,rgba(249,251,255,.82) 0%,rgba(237,242,250,.88) 60%,rgba(237,242,250,.95) 100%),var(--hero-tint);z-index:-1}
:root.no-hero-image body::before{opacity:0}
:root.no-hero-image body::after{background:linear-gradient(180deg,#f9fbff 0%,#eff3f8 100%)}
.wrap{width:var(--wrap-width);margin:auto;max-width:100%;padding:var(--space) calc(22px + env(safe-area-inset-left,0));padding-right:calc(22px + env(safe-area-inset-right,0));animation:fadeSlide .6s ease both}
h1{font-size:var(--title-size);font-weight:800;margin:8px 0 22px;letter-spacing:-.3px;animation:softDrop .7s ease both .12s;line-height:1.12}
.card{background:var(--surface);border:1px solid rgba(227,234,242,.7);border-radius:var(--radius);box-shadow:var(--shadow);padding:var(--card-padding);backdrop-filter:saturate(160%) blur(12px);animation:floatUp .7s ease both .18s}
.row{display:flex;gap:var(--gap)} .col{flex:1}
.row-center{align-items:center}
.row-between{justify-content:space-between}
.action-row{flex-wrap:wrap}
.action-row .btn{flex:1 1 clamp(160px,45%,100%);min-width:calc(50% - var(--gap)/2)}
.action-row .btn + .btn{margin-top:0}
.avatar{width:72px;height:72px;border-radius:24px;background:linear-gradient(135deg,#f2f6fc,#e3ecfa);display:grid;place-items:center;font-size:32px;box-shadow:inset 0 2px 10px rgba(255,255,255,.9)}
.leo-name{font-size:20px;font-weight:800;letter-spacing:-.2px}
.card-tap{cursor:pointer;transition:transform .25s ease, box-shadow .25s ease}
.card-tap:hover{transform:translateY(-2px);box-shadow:0 26px 50px rgba(14,27,41,.13)}
.card-tap:active{transform:translateY(0)}
.chevron{font-size:26px;color:rgba(14,27,41,.35);display:flex;align-items:center}
.section-head{display:flex;align-items:center;gap:10px;flex-wrap:wrap;justify-content:space-between}
.section-head strong{font-size:18px}
.history-empty{padding:18px;text-align:center;color:var(--muted);border:1px dashed rgba(198,209,223,.6);border-radius:14px;background:rgba(255,255,255,.6)}
.pane{display:grid;gap:var(--gap);flex-grow:1}
.pane-timer{justify-content:space-around}
.seg-sides{gap:0;margin:0 calc(-1 * var(--card-padding));border-radius:12px;overflow:hidden;background:rgba(239,243,247,.7)}
.seg-sides button{border-radius:0;border-left:1px solid rgba(198,209,223,.6)}
.seg-sides button:first-child{border-left:none}
.timer-shell{text-align:center;padding:24px 0}
.timer-shell .btn{margin-top:18px}
.time-note{min-height:1.2em;margin-top:6px}
.btn-compact{width:auto;padding:8px 14px;min-height:44px}
.field-spaced{margin-top:12px}
.modal-header{align-items:center;justify-content:space-between;margin-bottom:6px}
.badge-live{display:inline-flex;align-items:center;gap:6px;padding:4px 10px;border-radius:999px;background:rgba(10,110,255,.1);color:var(--primary);font-weight:600;font-size:13px}
.btn{display:inline-flex;align-items:center;justify-content:center;width:100%;padding:0 18px;height:var(--btn-height);min-height:var(--btn-height);border-radius:var(--btn-radius);border:1px solid transparent;cursor:pointer;font-weight:700;font-size:var(--btn-font);letter-spacing:.25px;transition:transform .12s ease, filter .2s ease, box-shadow .2s ease;background:linear-gradient(180deg,rgba(255,255,255,.2),rgba(255,255,255,0));position:relative;overflow:hidden}
.btn::after{content:"";position:absolute;inset:0;border-radius:inherit;background:linear-gradient(120deg,rgba(255,255,255,.2) 0%,rgba(255,255,255,0) 70%);opacity:0;transition:opacity .3s ease;pointer-events:none}
.btn:hover{transform:translateY(-1px);filter:brightness(1)}
.btn:hover::after{opacity:1}
.btn:active{transform:translateY(0);filter:brightness(.98)}
.btn:focus-visible{outline:3px solid rgba(10,132,255,.35);outline-offset:2px}
.btn-primary{background:linear-gradient(180deg,#0a84ff 0%,#0a6fe3 100%);color:#fff;box-shadow:var(--btn-shadow)}
.btn-success{background:linear-gradient(180deg,#34c759 0%,#2fb250 100%);color:#fff;box-shadow:0 10px 22px rgba(52,199,89,.18)}
.btn-ghost{background:rgba(239,243,247,.92);color:var(--text);border-color:rgba(198,209,223,.8)}
.stack{display:grid;gap:var(--gap)}
.list{display:grid;gap:12px}
.item{background:var(--surface);border:1px solid rgba(227,234,242,.85);border-radius:14px;padding:14px;box-shadow:0 8px 20px rgba(14,27,41,.05);position:relative;overflow:hidden}
.item.enter{animation:popIn .45s cubic-bezier(.33,1,.68,1) both}
.item::before{content:"";position:absolute;inset:0;background:linear-gradient(180deg,rgba(255,255,255,.25),rgba(255,255,255,0));opacity:0;transition:opacity .3s ease;pointer-events:none}
.item:hover::before{opacity:1}
.muted{color:var(--muted)}
.pill{padding:.25rem .6rem;border-radius:999px;border:1px solid var(--line);font-size:12px;color:var(--muted)}

/* Modal */
.modal{position:fixed;inset:0;background:rgba(247,250,255,.75);backdrop-filter:blur(14px);display:flex;align-items:center;justify-content:center;opacity:0;visibility:hidden;transition:opacity .28s ease, visibility .28s}
.modal.open{opacity:1;visibility:visible}
.sheet{background:rgba(255,255,255,.92);width:100%;height:100%;max-width:740px;margin:0 auto;padding:24px calc(18px + env(safe-area-inset-left,0));padding-right:calc(18px + env(safe-area-inset-right,0));display:flex;flex-direction:column;border:1px solid rgba(227,234,242,.8);border-radius:28px;box-shadow:0 24px 60px rgba(14,27,41,.18);transform:translateY(18px);opacity:0;transition:transform .32s ease,opacity .32s ease}
.modal.open .sheet{transform:translateY(0);opacity:1}

.seg{display:flex;gap:10px}
.seg button{flex:1;padding:0 16px;height:48px;border-radius:12px;border:1px solid rgba(198,209,223,.8);background:#eff3f7;font-weight:700;font-size:15px;transition:all .18s ease}
.seg button.active{background:var(--primary);color:#fff;border-color:transparent}
.scale{display:flex;gap:10px}
.scale button{flex:1;padding:0 14px;height:48px;border-radius:12px;border:1px solid rgba(198,209,223,.85);background:#eff3f7;font-size:16px;font-weight:600;transition:all .18s ease}
.scale button.active{background:var(--primary);color:#fff;border-color:transparent}
.field{display:grid;gap:8px}
.input{width:100%;padding:14px 16px;border-radius:12px;border:1px solid rgba(198,209,223,.85);font-size:17px;background:rgba(255,255,255,.92);transition:border-color .18s ease, box-shadow .18s ease}
.input:focus{border-color:rgba(10,132,255,.6);box-shadow:0 0 0 4px rgba(10,132,255,.12);outline:none}
.time{font-variant:tabular-nums;font-size:46px;font-weight:700;letter-spacing:1px}
.footer{display:flex;gap:14px;margin-top:14px}

#start-time-display{font-size:15px}

.sheet h2{font-size:26px;font-weight:800;margin:0 0 6px}
.sheet label{font-weight:600;color:var(--muted);font-size:15px}

/* Tap targets on mobile */
@media (pointer:coarse){ .btn,.seg button,.scale button{min-height:48px} }

@media screen and (min-width:390px) and (min-height:800px){
  :root{ --btn-height:56px; --btn-font:17px; --btn-radius:16px }
  .wrap{max-width:780px;padding:32px calc(26px + env(safe-area-inset-left,0));padding-right:calc(26px + env(safe-area-inset-right,0))}
  .card{padding:24px}
  h1{font-size:32px}
  .seg button,.scale button{height:52px;font-size:16px}
}

@media screen and (min-width:430px) and (min-height:880px){
  :root{ --btn-height:60px }
  .wrap{max-width:820px}
  h1{font-size:34px}
  .sheet{max-width:780px}
  .time{font-size:50px}
}

@media screen and (max-width:420px){
  .row{flex-direction:column}
  .btn{width:100%}
}

@media screen and (max-width:600px){
  .wrap{--wrap-width:calc(100% - clamp(18px,10vw,48px));padding:clamp(18px,6vw,28px)}
  .card{padding:calc(var(--card-padding) - 4px)}
  .action-row .btn{flex:1 1 100%}
  .section-head strong{font-size:17px}
  .seg-sides{margin:0 calc(-1 * (var(--card-padding) - 6px))}
}

@media screen and (max-width:360px){
  :root{ --btn-font:15px }
  h1{font-size:clamp(24px,8vw,28px)}
  .avatar{width:60px;height:60px}
  .seg button,.scale button{font-size:14px}
}

@media screen and (min-width:768px){
  .wrap{--wrap-width:min(820px, calc(100% - 200px))}
  .row{gap:calc(var(--gap) + 6px)}
  .pane{grid-template-rows:auto 1fr}
  .timer-shell{padding:28px 0}
  .list{gap:14px}
}

@media (prefers-reduced-motion:reduce){
  *,*::before,*::after{animation-duration:.01ms !important;animation-iteration-count:1 !important;transition-duration:.01ms !important;scroll-behavior:auto !important}
}

@keyframes fadeSlide{
  from{opacity:0;transform:translateY(16px)}
  to{opacity:1;transform:translateY(0)}
}

@keyframes softDrop{
  from{opacity:0;transform:translateY(-10px)}
  to{opacity:1;transform:translateY(0)}
}

@keyframes floatUp{
  from{opacity:0;transform:translateY(20px)}
  to{opacity:1;transform:translateY(0)}
}

@keyframes popIn{
  0%{opacity:0;transform:translateY(18px) scale(.98)}
  60%{opacity:1;transform:translateY(-4px) scale(1.01)}
  100%{opacity:1;transform:translateY(0) scale(1)}
}
